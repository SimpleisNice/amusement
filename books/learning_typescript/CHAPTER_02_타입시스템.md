# CHAPTER02 타입시스템

JS의 힘은 유연함에서 나온다. 그 유연함을 조심하세요.

## 2.1 타입의 종류

`타입`은 JS에서 다루는 값의 `형태`에 대한 설명

- `형태`란 값에 존재하는 속성과 메서드 그리고 내장되어 있는 typeof 연산자를 설명하는 것을 의미

TS의 가장 기본적인 타입은 JS의 일곱가지 기본 원시 타입과 동일

- null
- undefined
- boolean
- string
- number
- bigint
- symbol

### 2.1.1 타입 시스템

타입 시스템은 프로그래밍 언어가 프로그램에서 가질 수 있는 타입을 이해하는 방법에 대한 규칙 집합

기본적으로 TS의 타입 시스템은 다음과 같이 동작

1. 코드를 읽고 존재하는 모든 타입과 값을 이해
2. 각 값이 초기 선언에서 가질 수 있는 타입을 확인
3. 각 값이 추후 코드에서 어떻게 사용될 수 있는지 모든 방법을 확인
4. 값의 사용법이 타입과 일치하지 않으면 사용자에게 오류를 표시

Ex)

```ts
let firstName = "Whitney";

// This expression is not callable.
//  Type 'Number' has no call signatures.
firstName.length();
```

TS는 다음과 같은 순서로 오류를 표시

1. 코드를 읽고 firstName이라는 변수를 이해함
2. 초기값이 "Whitney"이므로 firstName이 string 타입이라고 결론
3. firstName의 .length 멤버를 함수처럼 호출하는 코드를 확인
4. string의 .length 멤버는 함수가 아닌 숫자라는 오류를 표시. 즉, 함수처럼 호출할 수 없음

### 2.1.2 오류 종류

TS를 작성하는 동안 가장 자주 접하게 되는 오류는 다음과 같음

- 구문 오류: TS가 JS로 변환되는 것을 차단한 경우
- 타입 오류: 타입 검사기에 따라 일치하지 않는 것이 감지된 경우

#### 구문 오류

구문 오류는 TS가 코드로 이해할 수 없는 잘못된 구문을 감지할 때 발생

- 이는 TS가 TS파일에서 JS파일을 올바르게 생성할 수 없도록 차단

#### 타입 오류

타입 오류는 TS의 타입 검사기가 프로그램의 타입에서 오류를 감지했을 때 발생 함

- 오류가 발생했다고 해서 TS 구문이 JS로 변환되는 것을 차단하지는 않음
- 하지만 코드가 실행되면 무언가 충돌하거나 예기치 않게 동작할 수 있음을 나타 냄

## 2.2 할당 가능성

TS는 변수의 초깃값을 읽고 해당 변수가 허용되는 타입을 결정함

TS에서 함수 호출이나 변수에 값을 제공할 수 있는지 여부를 확인하는 것은 할당 가능성이라 함

- 전달된 값이 예정된 타입으로 할당 가능한지 여부를 확인

### 2.2.1 할당 가능성 오류 이해하기

`Type ... is not assignable to type ...` 형태의 오류는 TS 코드를 작성할 때 만나게 되는 가장 일반적인 오류 중 하나

- 첫 번째 type은 코드에서 변수에 할당 하려고 시도하는 값
- 두 번째 type은 첫 번재 타입. 즉, 값이 할당되는 변수

## 2.3 타입 애너테이션(type annotation)

TS는 초깃값을 할당하지 않고도 변수의 타입을 선언할 수 있는 구문인 `타입 애너테이션`을 제공함

ex)

```ts
let rocker: string;
rocker = "Joan Jett";

// Type 'number' is not assignable to type 'string'.
rocker = 19.98;
```

타입 애너테이션은

- TS에만 존재하며 런타임 코드에 영향을 주지 않음
- 유효한 JS 구문이 아니므로, tsc 명령어를 실행해 TS 코드를 JS로 컴파일하면 해당 코드가 삭제됨
- 변수에 타입 애너테이션으로 정의한 타입 외의 값을 할당하면 타입 오류가 발생함

### 2.3.1 불필요한 타입 애너테이션

타입 애너테이션은 TS가 자체적으로 수집할 수 없는 정보를 TS에 제공할 수 있음

Ex)

```ts
// 타입 시스템은 변경되지 않음
let firstName: string = "Tina";

// Type 'number' is not assignable to type 'string'.
let secondName: string = 42;
```

글쓴이를 포함한 많은 개발자는 아무것도 변하지 않는 변수에는 타입 애너테이션을 추가하지 않기를 선호함

- 타입 애너테이션을 수동으로 작성하는 일은 번거로움

코드를 명확하게 문서화하거나 실수로 변수 타입이 변경되지 않도록 TS를 보호하기 위해 변수에 명시적으로 타입 애너테이션을 포함하는 것은 경우에 따라서 유요할 수 있음

## 2.4 타입 형태

TS는 변수에 할당된 값이 원래 타입과 일치하는지 확인하는 것 이상을 수행함

TS는 객체에 어떤 멤버 속성이 존재하는지 알고 있음

그러므로 특정 변수의 속성에 접근하려고 한다면 TS는 접근하려는 속성이 해당 변수에 타입에 존재하는지 확인을 함

### 2.4.1 모듈

모듈: export 또는 import가 있는 파일
스크립트: 모듈이 아닌 모든 파일

TS는 최신 모듈 파일을 기존 파일과 함께 실행할 수 있음

- 모듈 파일에 선언된 모든 것은 해당 파일에 명시한 export 문에서 내보내지 않는 한 모듈 파일에서만 사용할 수 있음
- 한 모듈 파일에서 다른 파일에 선언된 변수와 동일한 이름으로 선언된 변수는 다른 파일의 변수를 가져오지 않는 한 이름 충돌로 간주하지 않음

그러나 파일이 스크립트면 TS는 해당 파일을 전역 스코프로 간주하며 모든 스크립트가 파일의 내용에 접근할 수 있음

## 2.5 마치며

TS의 타입 시스템이 어떻게 작동하는지 살펴봤음
